language: java
services:
  - docker

before_install:
  - ./scripts/travis.sh

install:
  - pyenv global 3.8.1
  - pip install --upgrade pip
  - pip install -r requirements.txt
  - pip install .

script:
  - ./scripts/start-kind.sh
  - RAYVENS_TEST_MODE=local python ./examples/travis/stream.py
  - RAYVENS_TEST_MODE=local python ./examples/travis/source.py
  - ray submit ./scripts/cluster.yaml ./examples/travis/stream.py
  - ray submit ./scripts/cluster.yaml ./examples/travis/source.py
  - ray submit ./scripts/cluster.yaml ./examples/travis/source_operator.py
